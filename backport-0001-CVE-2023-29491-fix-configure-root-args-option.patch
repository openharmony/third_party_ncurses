From 49d07be98e591d2df1d5b8d55fc9ecac3185fb70 Mon Sep 17 00:00:00 2001
From: Sven Joachim <svenjoac@gmx.de>
Date: Mon, 1 May 2023 11:31:39 +0200
Subject: [PATCH] Fix the --disable-root-args and --disable-root-environ
 options

Due to a copy/paste error, the "--disable-root-environ" configure
option performed the actions of the "--disable-root-access" option,
while the latter option had no effect at all.

Conflict:add configure file changes based on community
Reference:https://salsa.debian.org/debian/ncurses/-/commit/49d07be98e591d2df1d5b8d55fc9ecac3185fb70
---
 configure.in | 2 +-
 configure | 6 +++---
 2 file changed, 4 insertion(+), 4 deletion(-)

diff --git a/configure.in b/configure.in
index 798b95a..613677f 100644
--- a/configure.in
+++ b/configure.in
@@ -854,7 +854,7 @@ AC_MSG_RESULT($with_root_environ)
 test "x$with_root_environ" = xyes && AC_DEFINE(USE_ROOT_ENVIRON,1,[Define to 1 if root is allowed to use ncurses environment])
 
 AC_MSG_CHECKING(if you want to permit setuid programs to access all files)
-AC_ARG_ENABLE(root-environ,
+AC_ARG_ENABLE(root-access,
 	[  --disable-root-access   restrict file-access when running setuid],
 	[with_root_access=$enableval],
 	[with_root_access=yes])
diff --git a/configure b/configure
index 421cf85..5141933 100755
--- a/configure
+++ b/configure
@@ -9399,9 +9399,9 @@ EOF
 echo "$as_me:9399: checking if you want to permit setuid programs to access all files" >&5
 echo $ECHO_N "checking if you want to permit setuid programs to access all files... $ECHO_C" >&6

-# Check whether --enable-root-environ or --disable-root-environ was given.
-if test "${enable_root_environ+set}" = set; then
-  enableval="$enable_root_environ"
+# Check whether --enable-root-access or --disable-root-access was given.
+if test "${enable_root_access+set}" = set; then
+  enableval="$enable_root_access"
   with_root_access=$enableval
 else
   with_root_access=yes
-- 
2.33.0

